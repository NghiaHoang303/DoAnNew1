{"ast":null,"code":"var _jsxFileName = \"/home/nghiahoang/Downloads/doAnNew/Full/frontend/src/screens/PlaceBookingScreen.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createBooking } from '../actions/bookingActions';\nimport CheckoutSteps from '../components/CheckoutTableSteps';\nimport { BOOKING_CREATE_RESET } from '../constants/bookingConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nexport default function PlaceBookingScreen(props) {\n  const cartTable = useSelector(state => state.cartTable);\n\n  if (!cartTable.paymentMethod) {\n    props.history.push('/paymentTable');\n  }\n\n  const bookingCreate = useSelector(state => state.bookingCreate);\n  const {\n    loading,\n    success,\n    error,\n    booking\n  } = bookingCreate;\n\n  const toPrice = num => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\n\n\n  cartTable.itemsPrice = toPrice(cartTable.cartTableItems.reduce((a, c) => a + c.qty * c.price, 0));\n  cartTable.taxPrice = toPrice(0.15 * cartTable.itemsPrice);\n  cartTable.totalPrice = cartTable.itemsPrice + cartTable.taxPrice;\n  const dispatch = useDispatch();\n\n  const placeBookingHandler = () => {\n    dispatch(createBooking({ ...cartTable,\n      bookingItems: cartTable.cartTableItems\n    }));\n  };\n\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/bookings/${booking._id}`);\n      dispatch({\n        type: BOOKING_CREATE_RESET\n      });\n    }\n  }, [dispatch, booking, props.history, success]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CheckoutSteps, {\n    step1: true,\n    step2: true,\n    step3: true,\n    step4: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }\n  }, \"Booking Table\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, \"Name:\"), \" \", cartTable.bookingTable.fullName, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 74\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 19\n    }\n  }, \"Phone Number: \"), \" \", cartTable.bookingTable.phoneNumber, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 88\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 19\n    }\n  }, \"Hour: \"), \" \", cartTable.bookingTable.hour, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 73\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }\n  }, \"Date: \"), \" \", cartTable.bookingTable.date, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 73\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 19\n    }\n  }, \"Number Place: \"), \" \", cartTable.bookingTable.numberPlace, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 88\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 19\n    }\n  }, \"Description: \"), \" \", cartTable.bookingTable.description, \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 87\n    }\n  })))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, \"Payment\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }, \"Method:\"), \" \", cartTable.paymentMethod))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, \"Booking Items\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, cartTable.cartTableItems.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.table,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.name,\n    className: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 27\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/table/${item.table}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 27\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, item.qty, \" x $\", item.price, \" = $\", item.qty * item.price))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Table Reservation Payment\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, \"$\", cartTable.itemsPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }, \"$\", cartTable.taxPrice.toFixed(2)))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, \" Booking Total\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, \"$\", cartTable.totalPrice.toFixed(2))))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: placeBookingHandler,\n    className: \"primary block\",\n    disabled: cartTable.cartTableItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"Place Booking\")), loading && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 27\n    }\n  }), error && /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, error))))));\n}","map":{"version":3,"sources":["/home/nghiahoang/Downloads/doAnNew/Full/frontend/src/screens/PlaceBookingScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","createBooking","CheckoutSteps","BOOKING_CREATE_RESET","LoadingBox","MessageBox","PlaceBookingScreen","props","cartTable","state","paymentMethod","history","push","bookingCreate","loading","success","error","booking","toPrice","num","Number","toFixed","itemsPrice","cartTableItems","reduce","a","c","qty","price","taxPrice","totalPrice","dispatch","placeBookingHandler","bookingItems","_id","type","bookingTable","fullName","phoneNumber","hour","date","numberPlace","description","map","item","table","image","name","length"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createBooking } from '../actions/bookingActions';\nimport CheckoutSteps from '../components/CheckoutTableSteps';\nimport { BOOKING_CREATE_RESET } from '../constants/bookingConstants';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n\n\nexport default function PlaceBookingScreen(props) {\n  const cartTable = useSelector((state) => state.cartTable);\n  if (!cartTable.paymentMethod) {\n    props.history.push('/paymentTable');\n  }\n  const bookingCreate = useSelector((state) => state.bookingCreate);\n  const { loading, success, error, booking } = bookingCreate;\n  const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\n  cartTable.itemsPrice = toPrice(\n    cartTable.cartTableItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n  cartTable.taxPrice = toPrice(0.15 * cartTable.itemsPrice);\n  cartTable.totalPrice = cartTable.itemsPrice + cartTable.taxPrice;\n  const dispatch = useDispatch();\n  const placeBookingHandler = () => {\n    dispatch(createBooking({ ...cartTable, bookingItems: cartTable.cartTableItems }));\n  };\n  useEffect(() => {\n    if (success) {\n      props.history.push(`/bookings/${booking._id}`);\n      dispatch({ type: BOOKING_CREATE_RESET });\n    }\n  }, [dispatch, booking, props.history, success]);\n  return (\n    <div>\n      <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\n      <div className=\"row top\">\n        <div className=\"col-2\">\n          <ul>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Booking Table</h2>\n                <p>\n                <strong>Name:</strong> {cartTable.bookingTable.fullName} <br />\n                  <strong>Phone Number: </strong> {cartTable.bookingTable.phoneNumber} <br />\n                  <strong>Hour: </strong> {cartTable.bookingTable.hour} <br />\n                  <strong>Date: </strong> {cartTable.bookingTable.date} <br />\n                  <strong>Number Place: </strong> {cartTable.bookingTable.numberPlace} <br />\n                  <strong>Description: </strong> {cartTable.bookingTable.description} <br />\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Payment</h2>\n                <p>\n                  <strong>Method:</strong> {cartTable.paymentMethod}\n                </p>\n              </div>\n            </li>\n            <li>\n              <div className=\"card card-body\">\n                <h2>Booking Items</h2>\n                <ul>\n                  {cartTable.cartTableItems.map((item) => (\n                    <li key={item.table}>\n                      <div className=\"row\">\n                        <div>\n                          <img\n                            src={item.image}\n                            alt={item.name}\n                            className=\"small\"\n                          ></img>\n                        </div>\n                        <div className=\"min-30\">\n                          <Link to={`/table/${item.table}`}>\n                            {item.name}\n                          </Link>\n                        </div>\n\n                        <div>\n                          {item.qty} x ${item.price} = ${item.qty * item.price}\n                        </div>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <div className=\"col-1\">\n          <div className=\"card card-body\">\n            <ul>\n              <li>\n                <h2>Table Reservation Payment</h2>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Items</div>\n                  <div>${cartTable.itemsPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>Tax</div>\n                  <div>${cartTable.taxPrice.toFixed(2)}</div>\n                </div>\n              </li>\n              <li>\n                <div className=\"row\">\n                  <div>\n                    <strong> Booking Total</strong>\n                  </div>\n                  <div>\n                    <strong>${cartTable.totalPrice.toFixed(2)}</strong>\n                  </div>\n                </div>\n              </li>\n              <li>\n                <button\n                  type=\"button\"\n                  onClick={placeBookingHandler}\n                  className=\"primary block\"\n                  disabled={cartTable.cartTableItems.length === 0}\n                >\n                  Place Booking\n                </button>\n              </li>\n              {loading && <LoadingBox></LoadingBox>}\n              {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}